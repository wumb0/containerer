{% extends "base.html" %}
{% block content %}
<div class="jumbotron">
    <div class="row">
        <div id="cont" class="col-md-12">
            {% if container %}
                {% set pubkey = container.pubkey.replace("\n","<br>") %}
                <p>Container hash: {{container.hash}}</p>
                <p>{{container.username}}@{{host}} port {{container.port}}</p>
                <pre>{{pubkey}}</pre>
                <p>Expiry at {{container.expiry.isoformat()}}</p>
                <button type="button" class="btn btn-danger" id="take">Expire now</button>
            {% else %}
                <button type="button" class="btn btn-primary" id="give">Give me a container</button>
            {% endif %}
        </div>
    </div>
</div>
{% endblock content %}

{% block footer %}
<script>
$( document ).ready(function()
{
    $('#cont').on("click", "#give", function(){
	$.ajax ( { 
		url: "/startcontainer"
		type: "GET",
		success: function (d) {
		    location.reload();
		}
	} );
    });
    $('#cont').on("click", "#take", function(){
	$.ajax ( { 
		url: "/expire/{{container.id}}"
		type: "GET",
		success: function (d) {
		    location.reload();
		}
	} );
    });
}
<script>
{% endblock footer %}
