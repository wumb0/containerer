{% extends "base.html" %}
{% block content %}
<div class="jumbotron">
    <div class="row">
        <div id="cont" class="col-md-12">
            {% if container %}
                <p>Container hash: {{container.hash}}</p>
                <p>Connection info: {{container.username}}@{{host}} port {{container.port}}</p>
                <pre>{{container.privkey}}</pre>
                <p>Expiry at {{container.expiry.isoformat()}}</p>
                <button type="button" class="btn btn-info" id="key">Download Key</button>
                <button type="button" class="btn btn-danger" id="take">Expire now</button>
            {% else %}
                <button type="button" class="btn btn-primary" id="give">Give me a container</button>
            {% endif %}
        </div>
    </div>
</div>
{% endblock content %}

{% block footer %}
<script>
$( document ).ready(function()
{
    $("#give").click(function(){
	$.ajax ( { 
		url: "/startcontainer",
		type: "GET",
		success: function (d) {
		    location.reload();
		}
	} );
    });
    $("#take").click(function(){
	$.ajax ( { 
		url: "/expire/{{container.hash}}",
		type: "GET",
		success: function (d) {
		    location.reload();
		}
	} );
    });
    $("#key").click(function(){
        window.location.replace("/getkey/{{container.hash}}")
    });
});
</script>
{% endblock footer %}
